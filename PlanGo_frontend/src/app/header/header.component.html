<p-toast></p-toast>
<header [@expandHeader]="headerState" class="h-lvh bg-[--primary-color] overflow-hidden">
    <nav class="h-lvh flex flex-col justify-between">
        <div class="flex flex-col items-start justify-center m-3">
            <svg (click)="toggleHeaderWidth()" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"
                stroke-width="1" stroke="white" class="size-8 my-2 ml-1 mb-6 cursor-pointer">
                <path stroke-linecap="round" stroke-linejoin="round" d="M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5" />
            </svg>

            <ng-container *ngIf="headerState === 'collapsed'; else expandedContent">
                <!-- Modo colapsado -->
                <button (click)="goToItineraries()" [@hoverAnimation]="buttonStates['itineraries']"
                    (mouseenter)="setHoverState('itineraries', 'hover')"
                    (mouseleave)="setHoverState('itineraries', 'default')">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1"
                        stroke="white" class="size-8 my-2 ml-1">
                        <path stroke-linecap="round" stroke-linejoin="round"
                            d="M3 3v1.5M3 21v-6m0 0 2.77-.693a9 9 0 0 1 6.208.682l.108.054a9 9 0 0 0 6.086.71l3.114-.732a48.524 48.524 0 0 1-.005-10.499l-3.11.732a9 9 0 0 1-6.085-.711l-.108-.054a9 9 0 0 0-6.208-.682L3 4.5M3 15V4.5" />
                    </svg>
                </button>
                <button (click)="goToExpense()" [@hoverAnimation]="buttonStates['expenses']"
                    (mouseenter)="setHoverState('expenses', 'hover')"
                    (mouseleave)="setHoverState('expenses', 'default')">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1"
                        stroke="white" class="size-8 my-2 ml-1">
                        <path stroke-linecap="round" stroke-linejoin="round"
                            d="M12 6v12m-3-2.818.879.659c1.171.879 3.07.879 4.242 0 1.172-.879 1.172-2.303 0-3.182C13.536 12.219 12.768 12 12 12c-.725 0-1.45-.22-2.003-.659-1.106-.879-1.106-2.303 0-3.182s2.9-.879 4.006 0l.415.33M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z" />
                    </svg>
                </button>
                <button (click)="goToSavedPlaces()" [@hoverAnimation]="buttonStates['savedPlaces']"
                    (mouseenter)="setHoverState('savedPlaces', 'hover')"
                    (mouseleave)="setHoverState('savedPlaces', 'default')">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1"
                        stroke="white" class="size-8 my-2 ml-1">
                        <path stroke-linecap="round" stroke-linejoin="round"
                            d="M17.593 3.322c1.1.128 1.907 1.077 1.907 2.185V21L12 17.25 4.5 21V5.507c0-1.108.806-2.057 1.907-2.185a48.507 48.507 0 0 1 11.186 0Z" />
                    </svg>
                </button>
            </ng-container>

            <!-- Modo expandido -->
            <ng-template #expandedContent>
                <div class="flex flex-col h-full w-full">
                    <div class="p-2 w-full">
                        <img [src]="userPhoto ? userPhoto : 'https://t3.ftcdn.net/jpg/05/87/76/66/360_F_587766653_PkBNyGx7mQh9l1XXPtCAq1lBgOsLl6xH.jpg'"
                            alt="Foto de perfil" class="w-[120px] h-[120px] rounded-full object-cover mb-4 shadow-lg" />
                        <h1 class="text-2xl text-white mb-2">{{ userName }}</h1>
                        <h2 class="text-md text-white">{{ userEmail }}</h2>
                        <div class="mt-6">
                            <h4 class="text-white text-md font-bold">5</h4>
                            <h4 class="text-white text-md">Itinerarios</h4>
                        </div>
                        <hr class="my-6">
                    </div>
                    <div class="p-2 w-full h-80 flex-grow flex flex-col justify-between">
                        <button (click)="onResetPassword()" class="h-12 bg-white text-black rounded-full">Restablecer
                            contraseña</button>
                        <button (click)="authService.logout()" class="h-12 bg-white text-black rounded-full">Cerrar
                            sesión</button>
                    </div>
                </div>
            </ng-template>
        </div>

    </nav>
</header>